أريدك أن تقوم بثلاثة تعديلات رئيسية على مشروعي (موقع ARKAN AI) دفعة واحدة، بدون أن أعطيك أي كود، أنت من يضيف ويعدّل كل شيء داخل المشروع (backend + frontend) مع الحفاظ على الأداء لكون السيرفر مجاني على Render.

أولاً: تطوير أداة "حذف الموسيقى من الصوت" لتدعم أيضاً الفيديو

حاليًا لدي أداة لحذف أو تقليل الموسيقى من ملفات الصوت فقط. أريدك أن تطوّرها لتصبح:

أداة موحدة لحذف/تقليل الموسيقى من الصوت أو الفيديو، بالتفاصيل التالية:

دعم نوعين من الملفات:

ملفات صوت: mp3, wav, m4a, ogg, flac … إلخ

ملفات فيديو: mp4, mkv, mov, avi, webm … إلخ

طريقة العمل:

إذا كان الملف صوت:

استمر في استخدام منطق المعالجة الحالي المعتمد على ffmpeg والفلاتر الصوتية لتقليل/حذف الموسيقى.

الناتج يكون ملف صوت بصيغة MP3.

إذا كان الملف فيديو:

استخرج تراك الصوت من الفيديو.

طبّق عليه نفس منطق إزالة/تقليل الموسيقى المستخدم مع الملفات الصوتية.

ثم:

أعِد دمج الصوت المعالَج مع نفس الصورة لإنتاج فيديو جديد (مثلاً بصيغة mp4).

بالإضافة إلى ذلك، وفّر خيار للمستخدم لتحميل الصوت الناتج فقط بصيغة MP3.

الأداء والقيود (مهم جداً):

الاعتماد فقط على ffmpeg والفلاتر الخفيفة، بدون مكتبات ذكاء اصطناعي ثقيلة أو نماذج ML.

وضع حد منطقي لحجم الملف ومدة الصوت/الفيديو (مثل حجم أقصى وعدد دقائق معقول) حتى لا يسقط السيرفر المجاني.

استخدام مجلد مؤقت للملفات وحذف الملفات الوسيطة بعد انتهاء العملية.

واجهة الأداة:

تعديل النصوص لتوضيح أن الأداة تدعم:

“حذف/تقليل الموسيقى من الصوت أو الفيديو”.

نفس حقل الرفع يقبل الصوت والفيديو.

بعد الانتهاء:

لو المدخل صوت: زر تحميل ملف MP3 المنقّى.

لو المدخل فيديو: زر تحميل الفيديو الناتج، وزر تحميل الصوت MP3 (اختياري).

ثانياً: إضافة شريط/واجهة تقدم (Progress Bar) لجميع الأدوات في الموقع

أريد نظام موحّد لعرض تقدم العملية (رفع + معالجة) في كل الأدوات، ليس فقط أداة واحدة.

المطلوب على مستوى الواجهة (Frontend):

إضافة عنصر واجهة (شريط تقدم أو شريط علوي + أيقونة حالة) يظهر للمستخدم:

اسم الملف.

حجم الملف (أو تقريبياً).

حالة العملية: “جارٍ الرفع”، “جارٍ المعالجة”، “اكتمل بنجاح”، “حدث خطأ”.

نسبة مئوية تقريبية (0% → 100%) إذا كان ذلك ممكنًا.

هذا النظام يجب أن يعمل مع جميع الأدوات التي تتعامل مع رفع ملفات أو عمليات معالجة تستغرق وقتاً، مثل:

تحويل الفيديو إلى صوت.

قص الفيديو.

حذف الموسيقى.

تحويل PDF إلى Word والعكس.

أي أداة أخرى فيها رفع ومعالجة.

التصميم يجب أن يكون:

متناسق مع الثيم الحالي (ستايل فرعوني حديث + نيون).

واضح على الموبايل والكمبيوتر.

غير مزعج، لكن ظاهر بشكل كافي للمستخدم.

التكامل مع الـ Backend:

استخدم أسلوب يناسب بنية المشروع الحالية (مثل polling أو تحديثات حالة بسيطة) لعرض حالة التقدم.

لو لا يمكن توفير نسبة دقيقة، استخدم مراحل واضحة:

مثلاً: 0% عند البدء، 30% بعد الرفع، 70% أثناء المعالجة، 100% عند الانتهاء.

المهم أن يشعر المستخدم أن العملية تتحرك ولا تبدو “متجمّدة”.

التعامل مع الأخطاء:

لو فشل الرفع أو المعالجة:

يُظهر شريط التقدم رسالة خطأ عربية واضحة (مثلاً: “فشل في معالجة الملف، حاول مرة أخرى”).

لا تترك الشريط معلقاً دون حالة نهائية.

ثالثاً: إضافة خيار "حذف الموسيقى بالكامل" في أداة حذف الموسيقى

أريد إضافة وضع جديد داخل أداة حذف الموسيقى من الصوت/الفيديو:

الأوضاع المتاحة في الأداة:

وضع 1: تقليل الموسيقى (الوضع الحالي – للمستخدم الذي يريد تقليل الموسيقى مع الحفاظ على جودة الصوت قدر الإمكان).

وضع 2: حذف الموسيقى بالكامل قدر الإمكان:

هذا الوضع يجب أن يكون أكثر عدوانية في الفلترة:

تضييق نطاق الترددات للموسيقى.

تركيز أكبر على نطاق تردد الكلام البشري.

مع توضيح واحد مهم للمستخدم في الواجهة:

أن هذا الخيار قد يؤثر على جودة الصوت البشري قليلاً، لكنه يحاول إزالة الموسيقى قدر الإمكان.

المهم أن يكون هذا الخيار “فعّال فعلاً” وليس خيارًا شكليًا:

أي أن الإعدادات/الفلاتر في الـ backend تختلف حقًا بين وضع “تقليل” ووضع “حذف أقصى قدر ممكن”.

تحديث واجهة الأداة:

إضافة عنصر اختيار واضح بين:

“وضع عادي – تقليل الموسيقى”

“وضع قوي – حذف الموسيقى قدر الإمكان”

إضافة سطر شرح تحت الوضع القوي يوضح:

أن النتيجة تقريبية، لكنها تحاول إزالة الموسيقى لأقصى درجة بلا استخدام نماذج ثقيلة.

التأكد من عمل هذا الخيار:

اختبر داخلياً الملف نفسه مع الوضعين:

الوضع العادي.

الوضع القوي.

تأكد أن نتيجة الملف مختلفة فعلاً بين الوضعين (أي أن تغيير الخيار له أثر حقيقي على الصوت الناتج).

رابعاً: الشروط العامة

لا تستخدم أي نماذج ذكاء اصطناعي ثقيلة أو مكتبات تفصل الصوت والموسيقى باستخدام ML، فقط أدوات خفيفة تناسب سيرفر مجاني (مثل ffmpeg والفلاتر).

لا تغيّر الـ routes أو أسماء الأدوات في الواجهة إلا إذا كان ذلك ضرورياً، واحرص على ألا ينكسر أي جزء من المنظومة الحالية.

عدّل الـ backend والـ frontend بنفسك (Flask routes, templates, JS/CSS) بما يناسب المعمارية الحالية للمشروع.

لا تعرض الأكواد في الرد هنا، بل نفّذ كل التعديلات مباشرة داخل المشروع.

بعد الانتهاء:

اختبر:

ملف صوت + ملف فيديو في أداة حذف الموسيقى مع كل الأوضاع.

أداة أو اثنين من الأدوات الأخرى للتأكد أن شريط التقدم يعمل فيها.

ثم أعطني ملخصاً بما تم عمله، وما الذي تغيّر بالضبط، وأي قيود تم وضعها لحماية السيرفر.

هذا كل المطلوب.